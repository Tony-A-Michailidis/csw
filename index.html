<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>pycsw viewer</title>
        <!-- Google Fonts: Inter -->
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
        <!-- Leaflet CSS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" media="screen" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <!-- Custom Styles -->
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <header class="app-header">
            <div class="container">
                <!-- Title and caption removed as requested -->
            </div>
        </header>

        <main class="container my-4">
            <section class="app-section">
                <form id="form-search">
                    <input type="hidden" id="input-startposition"/>
                    <input type="hidden" id="input-matched"/>
                    <input type="hidden" id="input-nextrecord"/>
                    <div class="row mb-3 align-items-center">
                        <div class="col-md-6 col-lg-4">
                            <div class="input-group">
                                <input class="form-control" type="text" id="input-anytext" placeholder="Search Terms"/>
                                <div class="input-group-append">
                                    <button type="submit" class="btn btn-primary">Search</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-4 text-md-right mt-2 mt-md-0">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="input-bbox">
                                <label class="form-check-label" for="input-bbox">Filter by location</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="input-footprints">
                                <label class="form-check-label" for="input-footprints">Footprints</label>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12 mb-4"> <!-- Changed to col-12 for full width -->
                            <div id="div-map" class="map-container"></div>
                        </div>
                        <div class="col-12"> <!-- Changed to col-12 for full width -->
                            <div class="results-container">
                                <div id="div-csw-results-glass" class="results-glass"></div>
                                <ul class="nav nav-tabs" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="tab-eccc" data-toggle="tab" href="#tab-csw-results-eccc" role="tab">ECCC CSW</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="tab-edh" data-toggle="tab" href="#tab-csw-results-edh" role="tab">EDH CSW (login required)</a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane fade show active" id="tab-csw-results-eccc" role="tabpanel">
                                        <div class="table-responsive">
                                            <table class="table table-hover" id="table-csw-results-eccc">
                                                <thead>
                                                    <tr>
                                                        <th>Search Results</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>No results yet. Start searching!</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="tab-csw-results-edh" role="tabpanel">
                                        <div class="table-responsive">
                                            <table class="table table-hover" id="table-csw-results-edh">
                                                <thead>
                                                    <tr>
                                                        <th>Search Results</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>No results yet. Start searching!</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <div id="div-results" class="results-info"></div>
                                    <ul class="pagination mb-0">
                                        <li id="li-previous" class="page-item disabled"><a class="page-link" id="a-previous" title="Previous" href="#">Previous</a></li>
                                        <li id="li-next" class="page-item disabled"><a class="page-link" id="a-next" title="Next" href="#">Next</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </section>
        </main>

        <footer class="app-footer">
            <div class="container">
                <hr>
                <a href="https://validator.w3.org/check?verbose=1&amp;uri=referer" title="Valid HTML 5!"><img src="https://www.w3.org/html/logo/downloads/HTML5_Badge_32.png" alt="Valid HTML 5!" height="32" width="32"/></a>
                <a href="https://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS!"><img src="https://jigsaw.w3.org/css-validator/images/vcss-blue" alt="Valid CSS!" height="31" width="88"/></a>
            </div>
        </footer>

        <!-- Modal Container -->
        <div class="modal fade" id="modal-record-details" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Record Details</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">&times;</button>
                    </div>
                    <div class="modal-body" id="modal-body-content">
                        <!-- XML content will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- jQuery -->
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.0.min.js"></script>
        <!-- Bootstrap JS -->
        <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
        <!-- Leaflet JS -->
        <script type="text/javascript" src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>

        <script type="text/javascript">
            // Your existing JavaScript logic goes here
            // (Copied from your original portal.html)

            var map = null;
            var map_layers_control = null;
            var csw_url_eccc_base = 'https://catalogue.ec.gc.ca/geonetwork/srv/eng/csw';
            var csw_url_edh_base = 'https://api-proxy-dev.edh-cde.unclass.dfo-mpo.gc.ca/data-sharing/external/eng/csw';
            var csw_url_eccc = 'https://catalogue.ec.gc.ca/geonetwork/srv/eng/csw';
            var csw_url_edh = 'https://api-proxy-dev.edh-cde.unclass.dfo-mpo.gc.ca/data-sharing/external/eng/csw?request=GetRecords&typeNames=csw:Record&resultType=results&elementSetName=full&maxRecords=10&service=CSW&version=2.0.2'
            var pagesize = 10;

            var protocols = {
                "None": ["Unknown", "WWW"],
                "ESRI:AIMS--http--configuration": ["ArcIMS Map Service Configuration File (*.AXL)", "ArcIMS"],
                "ESRI:AIMS--http-get-feature": ["ArcIMS Internet Feature Map Service", "ArcIMS"],
                "ESRI:AIMS--http-get-image": ["ArcIMS Internet Image Map Service", "ArcIMS"],
                "GLG:KML-2.0-http-get-map": ["Google Earth KML service (ver 2.0)", "KML"],
                "OGC:CSW": ["OGC-CSW Catalogue Service for the Web", "CSW"],
                "OGC:KML": ["OGC-KML Keyhole Markup Language", "KML"],
                "OGC:GML": ["OGC-GML Geography Markup Language", "GML"],
                "OGC:ODS": ["OGC-ODS OpenLS Directory Service", "OpenLS"],
                "OGC:OGS": ["OGC-ODS OpenLS Gateway Service", "OpenLS"],
                "OGC:OUS": ["OGC-ODS OpenLS Utility Service", "OpenLS"],
                "OGC:OPS": ["OGC-ODS OpenLS Presentation Service", "OpenLS"],
                "OGC:ORS": ["OGC-ODS OpenLS Route Service", "OpenLS"],
                "OGC:SOS": ["OGC-SOS Sensor Observation Service", "SOS"],
                "OGC:SPS": ["OGC-SPS Sensor Planning Service", "SPS"],
                "OGC:SAS": ["OGC-SAS Sensor Alert Service", "SAS"],
                "OGC:WCS": ["OGC-WCS Web Coverage Service", "WCS"],
                "OGC:WCS-1.1.0-http-get-capabilities": ["OGC-WCS Web Coverage Service (ver 1.1.0)", "WCS"],
                "OGC:WCTS": ["OGC-WCTS Web Coordinate Transformation Service", "WCTS"],
                "OGC:WFS": ["OGC-WFS Web Feature Service", "WFS"],
                "OGC:WFS-1.0.0-http-get-capabilities": ["OGC-WFS Web Feature Service (ver 1.0.0)", "WFS"],
                "OGC:WFS-G": ["OGC-WFS-G Gazzetteer Service", "WFS-G"],
                "OGC:WMC-1.1.0-http-get-capabilities": ["OGC-WMC Web Map Context (ver 1.1)", "WMC"],
                "OGC:WMS": ["OGC-WMS Web Map Service", "WMS"],
                "OGC:WMS-1.1.1-http-get-capabilities": ["OGC-WMS Capabilities service (ver 1.1.1)", "WMS"],
                "OGC:WMS-1.3.0-http-get-capabilities": ["OGC-WMS Capabilities service (ver 1.3.0)", "WMS"],
                "OGC:WMS-1.1.1-http-get-map": ["OGC Web Map Service (ver 1.1.1)", "WMS"],
                "OGC:WMS-1.3.0-http-get-map": ["OGC Web Map Service (ver 1.3.0)", "WMS"],
                "OGC:SOS-1.0
